![Pandora](/_media/arch.png)

七牛大数据平台Pandora的产品架构图如上图所示。数据入口是多样化的，用户可以通过使用我们的采集客户端直接收集数据发送到流式处理服务，也可以自主通过Pandora平台提供的Rest接口输入数据，还可以通过Pandora提供的针对不同语言的SDK将数据发送到流式处理服务中。进入流式处理服务以后，数据可以经过一系列的实时清洗、变换、聚合，最终根据需要导出到下游其他服务。
根据不同场景，针对时间序列的结构化数据，导出到时序数据库服务存储。针对需要检索和分词的业务数据，导出到日志检索服务。针对需要长时间存储的数据，则导出到七牛对象云存储服务，以较低的成本进行压缩存储。也根据根据实际的需求以http的形式定制化导出到其他数据库或者服务中。
对于已经落地的数据，可以采用离线计算服务进行数据的计算和分析，离线计算服务得到的结果可以以多种形态输出，最终通过报表服务展现，给予数据可视化的能力。

### 产品关系说明
1. 在公有云中，`流式处理服务`是整个大数据平台的数据唯一入口；
2. 在公有云中，`XSpark`的源数据来自`对象存储服务`；
3. `消息队列`中的数据可以通过`计算任务`将计算结果保存到一个新的`消息队列`中。 
4. 任何一个`消息队列`中的数据都可以导出到Pandora的下游产品当中。
5. 一个`消息队列`可以同时进行多个`计算任务`和`导出任务`，它的组织架构是拓扑形式的。

### 数据闭环

1. `消息队列`中的数据是隐式的，也就是说我们无法查询堆积在`消息队列`中的具体数据；并且`消息队列中`的数据目前只会存储2天时间。
2. `计算任务`是消耗物理资源的，当用户购买的资源较少，同时数据量输入过大时，就会产生严重的数据堆积；这种堆积可能会造成数据丢失。